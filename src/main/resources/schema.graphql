type Query {
    allSectionOnArticle(articleId: ID!): [Section]!
    allLikedSections(userId: ID!): [LikedSection]!
    allBookmarkedSections(userId: ID!): [Section]!

    article(articleId: ID!): ArticleDetail!
    allArticles: [ArticleDetail]!
    allPublishedArticles(userId: ID!): [ArticleDetail]!
    allDraftedArticles: [ArticleDetail]!
    allLikedArticles(userId: ID!): [ArticleDetail]!
    allLearnedArticles(userId: ID!): [ArticleDetail]!
    famousArticles: [ArticleDetail]!

    plan(planId: ID!): PlanListItem!
    planDetail(planId: ID!): PlanDetail!
    allPlans: [PlanListItem]!
    allPublishedPlans(userId: ID!): [PlanDetail]!
    allDraftedPlans: [PlanDetail]!
    allLikedPlans: [PlanItem]!
    allLearningPlans(userId: ID!): [LearningPlanItem]!
    allLearnedPlans(userId: ID!): [PlanDetail]!
    famousPlans: [PlanItem]!
    allPlanElementDetails(planId: ID!): [ElementDetail]!

    user(userId: ID!): User
    profile: User
    famousTags: [TagStatistic]!
}

type PlanListItem{
    base: PlanBase
    tags: [Tag]
    action: PlanAction
    statistics: PlanStatistics
}

type PlanItem {
    base: PlanBase
    tags: [Tag]
    author: User
    elementCount: Int
    statistics: PlanStatistics
}

type LearningPlanItem{
    base: PlanBase
    action: PlanAction
    statistics: PlanStatistics
}

type PlanDetail {
    base: PlanBase
    author: User
    tags: [Tag]
    elements: [Element]
    statistics: PlanStatistics,
    action: PlanAction
}

type PlanBase{
    id: ID!
    title: String!
    description: String!
    imageUrl: String!
    status: String!
    createDate: String!
    updateDate: String!
}

type PlanStatistics {
    like: Int!
    learning: Int!
    learned: Int!
}

type PlanAction {
    liked: Boolean!
    learning: Boolean!
    learned: Boolean!
    learnedElementCount: Int!
    allElementCount: Int!
}

type Element {
    id: ID!
    title: String
    imageUrl: String
    type: String!
    number: Int!
}

type ElementDetail {
    id: ID!
    title: String
    imageUrl: String
    type: String!
    number: Int!
    action: PlanElementAction!
    statistics: PlanElementStatistics!
}

type PlanElementAction {
    liked: Boolean!
    learned: Boolean!
}

type PlanElementStatistics{
    like: Int!
    learned: Int!
}

type ArticleDetail {
    base: ArticleBase
    tags: [Tag]
    author: User
    statistics: ArticleStatistics
    action: ArticleAction
}

type ArticleBase {
    id: ID!
    title: String!
    imageUrl: String!
    status: String!
    createDate: String!
    updateDate: String!
}

type ArticleStatistics {
    like: Int!
    learned: Int!
}

type ArticleAction {
    liked: Boolean!
    learned: Boolean!
}

type LikedSection {
    articleId: String!
    section: Section
}

type Section {
    id: ID!
    title: String!
    text: String!
    number: Int!
    authorId: String!
    statistics: SectionStatistics
    liked: Boolean!
}

type SectionStatistics{
    like: Int!
}

type User{
    id: ID!
    displayName: String!
    imageUrl: String!
    description: String!
    url: String!
    tags: [Tag]
}

type Tag{
    id: ID!
    name: String!
}

type TagStatistic{
    id: ID!
    name: String!
    related: Int!
}

input CreateSectionInput{
    title: String!
    text: String!
    number: Int!
}

input UpdateSectionInput{
    id: ID!
    title: String!
    text: String!
    number: Int!
}

input ArticleInput {
    id: ID!
    title: String!
    imageUrl: String
    tags: [String]!
}

input PlanBaseInput {
    id: ID!
    title: String!
    description: String!
    tags: [String]!
    imageUrl: String!
}

input PlanElementInput{
    id: ID!
    number: Int!
}

input UserInput{
    displayName: String!
    description: String
    url: String
    imageUrl: String
    tags: [String]
}


type Mutation {
    createSection(articleId: ID!, section: CreateSectionInput!): CreateResponse
    updateSection(sectionId: ID!, section: UpdateSectionInput!): UpdateResponse
    deleteSection(articleId: ID!, sectionId: ID! ): UpdateResponse
    likeSection(sectionId: ID!): UpdateResponse
    deleteLikeSection(sectionId: ID!): UpdateResponse

    initArticle: CreateResponse
    # updateArticle(articleId: ID!, article: ArticleInput): UpdateResponse
    updateArticleTitle(articleId: ID!, title: String!): UpdateResponse
    updateArticleImageUrl(articleId: ID!, url: String!): UpdateImageResponse
    updateArticleTags(articleId: ID!, tags: [String]!): UpdateResponse
    deleteArticle(articleId: ID!): UpdateResponse
    #    publishArticle(articleId: ID!): UpdateResponse
    #    draftArticle(articleId: ID!): UpdateResponse
    publishArticle(article: ArticleInput!, sections: [UpdateSectionInput]!): UpdateResponse
    draftArticle(article: ArticleInput!, sections: [UpdateSectionInput]!): UpdateResponse

    likeArticle(articleId: ID!): UpdateResponse
    deleteLikeArticle(articleId: ID!): UpdateResponse
    finishArticle(articleId: ID!): UpdateResponse
    deleteFinishArticle(articleId: ID!): UpdateResponse

    initPlan: CreateResponse
    updatePlanTitle(planId: ID!, title: String!): UpdateResponse
    updatePlanImageUrl(planId: ID!, url: String!): UpdateImageResponse
    updatePlanTags(planId: ID!, tags: [String]!): UpdateResponse
    updatePlanDescription(planId: ID!, description: String!): UpdateResponse

    deletePlan(planId: ID!): UpdateResponse
    publishPlan(base: PlanBaseInput!, elements: [PlanElementInput]!): UpdateResponse
    draftPlan(base: PlanBaseInput!, elements: [PlanElementInput]!): UpdateResponse
    likePlan(planId: ID!): UpdateResponse
    deleteLikePlan(planId: ID!): UpdateResponse
    startPlan(planId: ID!): UpdateResponse
    stopPlan(planId: ID!): UpdateResponse
    finishPlan(planId: ID!): UpdateResponse

    createUser(user: UserInput!): UpdateResponse
    updateUser(user: UserInput!): UpdateResponse
    updateUserTags(tags: [String]!): UpdateResponse
    updateUserImageUrl(url: String!):UpdateImageResponse
    deleteUser: UpdateResponse

    createTag(name: String!): CreateTagResponse
}

type CreateResponse {
    id: ID!,
    error: Error
}

type CreateTagResponse {
    id: ID!,
    name: String!
    error: Error
}

type UpdateResponse {
    error: Error
}

type UpdateImageResponse {
    url: String
    error: Error
}


type Error{
    errorCode: String
    errorMessage: String
}
